(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["login"],{"3c66":function(t,e,a){"use strict";a.d(e,"a",function(){return n});var s=a("8c92"),i=a.n(s),n=function(t){t.$axios.post("/account/login",{email:t.username,password:t.password}).then(function(e){200==e.status?(i.a.set("qaUsername",t.username),i.a.set("qaPassword",t.password),i.a.set("qaNickname",e.data.nickname),i.a.set("activeFlag",!0),t.$router.push("/dashboard")):t.$Message.error(e.data.detail)}).catch(function(e){t.$Message.error(e.response.data.detail),t.loading=!1})}},5326:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-card",{staticClass:"elevation-1 pa-3 login-card"},[a("v-card-text",[a("div",{staticClass:"layout column align-center"},[a("img",{attrs:{src:"/static/m.png",alt:"Vue Material Admin",width:"120",height:"120"}}),a("h1",{staticClass:"flex my-4 primary--text",staticStyle:{"font-size":"2em !important"}},[t._v("欢迎登陆")])]),a("v-form",[a("v-text-field",{attrs:{"append-icon":"email",name:"login",placeholder:"邮箱",type:"text"},model:{value:t.username,callback:function(e){t.username=e},expression:"username"}}),a("v-text-field",{attrs:{"append-icon":"lock",name:"password",placeholder:"密码",id:"password",type:"password"},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.login(e)}},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})],1)],1),a("div",{staticClass:"login-btn"},[a("v-spacer"),a("v-btn",{attrs:{block:"",color:"primary",loading:t.loading},on:{click:t.login}},[t._v("登陆")]),a("div",{staticClass:"register-btn",on:{click:t.toRegister}},[t._v("新用户注册")])],1)],1)},i=[],n=a("8c92"),r=a.n(n),o=a("3c66"),d={data:function(){return{loading:!1,username:"",password:""}},created:function(){this.username=r.a.get("qaUsername"),this.password=r.a.get("qaPassword"),this.username&&this.password&&this.login()},mounted:function(){},methods:{login:function(){if(this.loading=!0,!this.username||!this.password)return this.$Message.error("账号密码不能为空"),void(this.loading=!1);var t=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return t.test(this.username)?this.password.length<4||this.password.length>16?(this.$Message.error("密码格式不正确"),void(this.loading=!1)):void o["a"](this):(this.$Message.error("邮箱格式不正确"),void(this.loading=!1))},toRegister:function(){this.$router.push("/register")}}},c=d,l=(a("8af2"),a("6691")),u=a("13d6"),h=a.n(u),p=a("8a6c"),f=a("d1f2"),m=a("ec0b"),g=a("8a71"),v=a("df4d"),w=a("c5f9"),k=Object(l["a"])(c,s,i,!1,null,"51477a45",null);e["default"]=k.exports;h()(k,{VBtn:p["a"],VCard:f["a"],VCardText:m["a"],VForm:g["a"],VSpacer:v["a"],VTextField:w["a"]})},"5f00":function(t,e,a){},"8a71":function(t,e,a){"use strict";a("b65c");var s=a("8298");e["a"]={name:"v-form",mixins:[Object(s["b"])("form")],inheritAttrs:!1,props:{value:Boolean,lazyValidation:Boolean},data:function(){return{inputs:[],watchers:[],errorBag:{}}},watch:{errorBag:{handler:function(){var t=Object.values(this.errorBag).includes(!0);this.$emit("input",!t)},deep:!0,immediate:!0}},methods:{watchInput:function(t){var e=this,a=function(t){return t.$watch("hasError",function(a){e.$set(e.errorBag,t._uid,a)},{immediate:!0})},s={_uid:t._uid,valid:void 0,shouldValidate:void 0};return this.lazyValidation?s.shouldValidate=t.$watch("shouldValidate",function(i){i&&(e.errorBag.hasOwnProperty(t._uid)||(s.valid=a(t)))}):s.valid=a(t),s},validate:function(){var t=this.inputs.filter(function(t){return!t.validate(!0)}).length;return!t},reset:function(){for(var t=this,e=this.inputs.length;e--;)this.inputs[e].reset();this.lazyValidation&&setTimeout(function(){t.errorBag={}},0)},resetValidation:function(){for(var t=this,e=this.inputs.length;e--;)this.inputs[e].resetValidation();this.lazyValidation&&setTimeout(function(){t.errorBag={}},0)},register:function(t){var e=this.watchInput(t);this.inputs.push(t),this.watchers.push(e)},unregister:function(t){var e=this.inputs.find(function(e){return e._uid===t._uid});if(e){var a=this.watchers.find(function(t){return t._uid===e._uid});a.valid&&a.valid(),a.shouldValidate&&a.shouldValidate(),this.watchers=this.watchers.filter(function(t){return t._uid!==e._uid}),this.inputs=this.inputs.filter(function(t){return t._uid!==e._uid}),this.$delete(this.errorBag,e._uid)}}},render:function(t){var e=this;return t("form",{staticClass:"v-form",attrs:Object.assign({novalidate:!0},this.$attrs),on:{submit:function(t){return e.$emit("submit",t)}}},this.$slots.default)}}},"8af2":function(t,e,a){"use strict";var s=a("ae89"),i=a.n(s);i.a},"935e":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-card",{staticClass:"elevation-1 pa-3 login-card"},[a("v-card-text",[a("div",{staticClass:"layout column align-center"},[a("img",{attrs:{src:"/static/m.png",alt:"Vue Material Admin",width:"120",height:"120"}}),a("h1",{staticClass:"flex my-4 primary--text",staticStyle:{"font-size":"2em !important"}},[t._v("新用户注册")])]),a("v-form",[a("v-text-field",{attrs:{"append-icon":"email",name:"login",placeholder:"邮箱",type:"text"},model:{value:t.username,callback:function(e){t.username=e},expression:"username"}}),a("v-text-field",{attrs:{"append-icon":"people",name:"login",placeholder:"昵称",type:"text"},model:{value:t.nickname,callback:function(e){t.nickname=e},expression:"nickname"}}),a("v-text-field",{attrs:{"append-icon":"lock",name:"password",placeholder:"密码",id:"password",type:"password"},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}}),a("v-text-field",{attrs:{"append-icon":"lock",name:"password",placeholder:"重复密码",id:"repassword",type:"password"},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.register(e)}},model:{value:t.repassword,callback:function(e){t.repassword=e},expression:"repassword"}})],1)],1),a("div",{staticClass:"login-btn"},[a("v-spacer"),a("v-btn",{attrs:{block:"",color:"primary",loading:t.loading},on:{click:t.register}},[t._v("注册")]),a("div",{staticClass:"register-btn",on:{click:t.toLogin}},[t._v("前往登陆")])],1)],1)},i=[],n=a("8c92"),r=a.n(n),o=a("3c66"),d=function(t){t.$axios.post("/account/register",{email:t.username,nickname:t.nickname,password:t.password}).then(function(e){200==e.status?(console.log(t.nickname),r.a.set("qaUsername",t.username),r.a.set("qaPassword",t.password),r.a.set("qaNickname",t.nickname),t.$Message.success("注册成功，自动登陆中..."),setTimeout(function(){o["a"](t)},500)):(t.$Message.error(e.data.detail),t.loading=!1)}).catch(function(e){t.$Message.error(e.response.data.detail),t.loading=!1})},c={data:function(){return{loading:!1,username:"",password:"",nickname:"",repassword:""}},methods:{register:function(){if(console.log(this.username,this.password,this.nickname,this.repassword),this.loading=!0,!this.username||!this.password||!this.nickname||!this.repassword)return this.$Message.error("信息填写不完整"),void(this.loading=!1);var t=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return t.test(this.username)?this.password.length<4||this.password.length>16?(this.$Message.error("密码格式不正确"),void(this.loading=!1)):this.password!=this.repassword?(this.$Message.error("两次输入的密码不一致"),void(this.loading=!1)):void d(this):(this.$Message.error("邮箱格式不正确"),void(this.loading=!1))},toLogin:function(){this.$router.push("/login")}}},l=c,u=(a("a713"),a("6691")),h=a("13d6"),p=a.n(h),f=a("8a6c"),m=a("d1f2"),g=a("ec0b"),v=a("8a71"),w=a("df4d"),k=a("c5f9"),x=Object(u["a"])(l,s,i,!1,null,"6c7227ca",null);e["default"]=x.exports;p()(x,{VBtn:f["a"],VCard:m["a"],VCardText:g["a"],VForm:v["a"],VSpacer:w["a"],VTextField:k["a"]})},a713:function(t,e,a){"use strict";var s=a("5f00"),i=a.n(s);i.a},ae89:function(t,e,a){},b65c:function(t,e,a){}}]);
//# sourceMappingURL=login.e41b8590.js.map